version: '3'

services:
    plant-service:
        image: node:7.5.0-alpine
        volumes:
            - ./plant-service/:/usr/src/app/
        working_dir: /usr/src/app/
        command: "sh -c 'npm run build'"
        env_file: 
            - ./plant-service/.secret.db.env

    tool-service:
        image: node:7.5.0-alpine
        volumes:
            - ./tool-service/:/usr/src/app/
        working_dir: /usr/src/app/
        command: "sh -c 'npm run build'"
        env_file: 
            - ./tool-service/.secret.db.env

    plot-service:
        image: node:7.5.0-alpine
        volumes:
            - ./plot-service/:/usr/src/app/
        working_dir: /usr/src/app/
        command: "sh -c 'npm run build'"
        env_file: 
            - ./plot-service/.secret.db.env

    angular-client:
        image: node:7.5.0-alpine
        volumes:
            - ./angular-client/:/usr/src/app/
        working_dir: /usr/src/app/
        command: "sh -c 'npm run build'"
    
    serial-service:
        image: arunk3001/node-serialport:4.0.7-alpine
        volumes:
            - ./serial-service/:/usr/src/app/
        working_dir: /usr/src/app/
        command: "sh -c 'npm run build'"
        privileged: true
        